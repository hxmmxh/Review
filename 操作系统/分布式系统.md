# 目录
* [概述](#概述)
* [CAP](#CAP)
* [Paxos算法](#Paxos)




[参考资料](https://blog.csdn.net/zyhlwzy/article/details/78658002)
[参考资料](https://www.cnblogs.com/xybaby/p/7076731.html)
----------------------
# 概述

### 什么是分布式系统
* 分布式系统是由一组通过网络进行通信、为了完成共同的任务而协调工作的计算机节点组成的系统。
* 分布式系统的出现是为了用廉价的、普通的机器完成单个计算机无法完成的计算、存储任务。
* 其目的是利用更多的机器，处理更多的数据。


### 缺点

1. 故障排除难度高
由于分布在多台服务器上，故障排除和诊断问题难度较高。
2. 软件支持少
更少的软件支持是分布式计算机系统的主要缺点。
3. 网络基础设施成本高
网络基础设置问题，包括传输、高负载、信息丢失问题。
4. 安全性问题
开放式系统的特性让分布式计算机系统存在着数据的安全性和共享的风险问题。

### 特性与衡量标准
* **透明性**
使用分布式系统的用户并不关心系统是怎么实现的，也不关心读到的数据来自哪个节点，对用户而言，分布式系统的最高境界是用户根本感知不到这是一个分布式系统
* **可扩展性**
分布式系统的根本目标就是为了处理单个计算机无法处理的任务，当任务增加的时候，分布式系统的处理能力需要随之增加。简单来说，要比较方便的通过增加机器来应对数据量的增长，同时，当任务规模缩减的时候，可以撤掉一些多余的机器，达到动态伸缩的效果
* **可用性与可靠性**
一般来说，分布式系统是需要长时间甚至7*24小时提供服务的。可用性是指系统在各种情况对外提供服务的能力，简单来说，可以通过不可用时间与正常服务时间的必知来衡量；而可靠性而是指计算结果正确、存储的数据不丢失。
* **高性能**
不管是单机还是分布式系统，大家都非常关注性能。不同的系统对性能的衡量指标是不同的，最常见的：高并发，单位时间内处理的任务越多越好；低延迟：每个任务的平均时间越少越好。这个其实跟操作系统CPU的调度策略很像
* **一致性**
分布式系统为了提高可用性可靠性，一般会引入冗余（复制集）。那么如何保证这些节点上的状态一致，这就是分布式系统不得不面对的一致性问题。一致性有很多等级，一致性越强，对用户越友好，但会制约系统的可用性；一致性等级越低，用户就需要兼容数据不一致的情况，但系统的可用性、并发性很高很多。

------------------------

# 核心问题

## 分片
对任务进行拆分，将任务的子集分配到每一个节点，
## 一致性问题




最终一致性（eventual consistency），即总会存在一个时刻（而不是立刻），让系统达到一致的状态






----------------------------
# CAP

### CAP定义
* CAP理论是说对于分布式数据存储，最多只能同时满足`一致性（C,Consistency）、可用性（A,Availability）、分区容错性（P,Partition Tolerance）`中的两者。
　　* 一致性，是指对于每一次读操作，要么都能够读到最新写入的数据，要么错误。
　　* 可用性，是指对于每一次请求，都能够得到一个及时的、非错的响应，但是不保证请求的结果是基于最新写入的数据。
　　* 分区容错性，是指由于节点之间的网络问题，即使一些消息对包或者延迟，整个系统能继续提供服务（提供一致性或者可用性）。
* 当网络可能出现分区的时候，系统是无法同时保证一致性和可用性的。要么，节点收到请求后因为没有得到其他节点的确认而不应答（牺牲可用性），要么节点只能应答非一致的结果（牺牲一致性）。
* 由于大多数时候网络被认为是可靠的，因此系统可以提供一致可靠的服务；当网络不可靠时，系统要么牺牲掉一致性（多数场景下），要么牺牲掉可用性。
* 分区是一个相对的概念，当超过了预定的通信时限，即系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择

### 应用场景
1. 弱化一致性
对结果一致性不敏感的应用，可以允许在新版本上线后过一段时间才最终更新成功，期间不保证一致性。例如网站静态页面内容、实时性较弱的查询类数据库等，简单分布式同步协议如Gossip，以及CouchDB、Cassandra数据库等，都是为此设计的。
2. 弱化可用性
对结果一致性很敏感的应用，例如银行取款机，当系统故障时候会拒绝服务。MongoDB、Redis、MapReduce等是为此设计的。Paxos、Raft等共识算法，主要处理这种情况。在Paxos类算法中，可能存在着无法提供可用结果的情形，同时允许少数节点离线。
3. 弱化分区容忍性
现实中，网络分区出现概率较小，但较难完全避免。两阶段的提交算法，某些关系型数据库及ZooKeeper主要考虑了这种设计。实践中，网络可以通过双通道等机制增强可靠性，达到高稳定的网络通信。

----------------------------
# Paxos

Paxos问题是指分布式的系统中存在故障（crash fault），但不存在恶意（corrupt）节点的场景（即可能消息丢失或重复，但无错误消息）下的共识达成问题