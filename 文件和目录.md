# 文件和目录

## stat及其相关函数

```c
#include <sys/stat.h>
int stat(const char *path, struct stat *buf);
int fstat(int fd, struct stat *buf);
int lstat(const char *path, struct stat *buf);
int fstatat(int fd, const char *path,struct stat *buf, int flag );
成功返回0，出错返回-1
fstat函数获得的是对应文件描述符的打开文件的信息
当一个文件是符号链接时，lstat 函数返回的是该符号链接本身的信息；而 stat 函数返回的是该链接指向文件的信息。
fstatat函数为一个相对于目录（由fd参数指定，AT_FDCWD表明相对于当前目录）的路径名返回文件结构信息。flag参数控制是否跟随符号链接，当AT_SYMLINK_NOFOLLOW标志被设置时，不会跟随符号链接，返回符号链接本身的信息。默认情况下返回的是符号链接所指向的实际文件的信息。

struct stat {
    mode_t              st_mode;       //文件对应的模式，文件，目录等
    ino_t               st_ino;        //inode节点号
    dev_t               st_dev;        //设备号码
    dev_t               st_rdev;       //特殊设备号码
    nlink_t             st_nlink;      //文件的连接数
    uid_t               st_uid;        //文件所有者
    gid_t               st_gid;        //文件所有者对应的组
    off_t               st_size;       //普通文件，对应的文件字节数
    struct timespec     st_atime;      //文件最后被访问的时间
    struct timespec     st_mtime;      //文件内容最后被修改的时间
    struct timespec     st_ctime;      //文件状态改变时间
    blksize_t           st_blksize;    //文件内容对应的块大小
    blkcnt_t            st_blocks;     //文件内容对应的块数量
};
struct timespec{
    time_t tv_sec; //秒
    long tv_nsec;  //纳秒
};
```

## 文件类型介绍


1.普通文件
2.目录文件
3.块特殊文件
4.字符特殊文件
5.FIFO
6.套接字
7.符号链接